(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7630aed6"],{"74da":function(e,a,t){"use strict";var l=t("9658"),i=t.n(l);i.a},9255:function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"content-wrap"},[t("el-card",{attrs:{header:"系统菜单"}},[t("el-scrollbar",[t("el-tree",{attrs:{"default-expand-all":"",data:e.treeData,props:e.treeOpstion},on:{"node-click":e.treeClickNode}})],1)],1),t("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-between",height:"100%",overflow:"hidden"}},[t("div",{staticStyle:{"min-height":"220px",height:"220px"}},[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[e._v(" 关联数据表 "),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){e.dialogVisible=!0}}},[e._v("新增关联表")])],1),t("mixTable",{key:e.tableData&&e.tableData.length||"key",attrs:{options:{height:"110px"},fields:e.tabelFields},model:{value:e.tableData,callback:function(a){e.tableData=a},expression:"tableData"}})],1)],1),t("div",{staticStyle:{flex:"1 1 auto",overflow:"hidden",height:"100%","min-height":"220px","max-height":"100%"}},[t("el-tabs",{staticStyle:{height:"100%"},attrs:{type:"border-card"}},[t("el-tab-pane",{attrs:{label:"菜单关联表"}},[t("el-tabs",{staticClass:"tabs-top",model:{value:e.activeTabName,callback:function(a){e.activeTabName=a},expression:"activeTabName"}},[t("el-tab-pane",{key:e.key+1,attrs:{label:"数据表格",name:"a"}},["a"==e.activeTabName?t("mixTable",{attrs:{fields:e.tableMenuField,options:e.tableOptions},model:{value:e.tableMenuData,callback:function(a){e.tableMenuData=a},expression:"tableMenuData"}}):e._e()],1),t("el-tab-pane",{key:e.key+2,attrs:{label:"表单字段",name:"b"}},["b"==e.activeTabName?t("mixTable",{attrs:{fields:e.formMenuField,options:e.tableOptions},model:{value:e.formMenuData,callback:function(a){e.formMenuData=a},expression:"formMenuData"}}):e._e()],1)],1)],1),t("el-tab-pane",{attrs:{label:"添加字段"}},[t("el-scrollbar",[t("div",{staticStyle:{display:"flex"}},[t("div",{staticStyle:{flex:"1"}},[t("div",{staticStyle:{margin:"10px"}},[e._v("表格属性:")]),t("mixForm",{attrs:{fields:e.addFieldFormFields},model:{value:e.addFieldFormData,callback:function(a){e.addFieldFormData=a},expression:"addFieldFormData"}})],1),t("div",{staticStyle:{flex:"1"}},[t("div",{staticStyle:{margin:"10px"}},[e._v("表单属性:")]),t("mixForm",{attrs:{fields:e.addFieldFormField_a},model:{value:e.addFieldFormData.editable,callback:function(a){e.$set(e.addFieldFormData,"editable",a)},expression:"addFieldFormData.editable"}})],1)])])],1)],1)],1)]),t("el-dialog",{attrs:{title:"新增关联表",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(a){e.dialogVisible=a}}},[t("mixForm",{ref:"form",attrs:{fields:e.tableFormfields,options:{labelWidth:"80px",size:"small"}},model:{value:e.tableFormData,callback:function(a){e.tableFormData=a},expression:"tableFormData"}})],1)],1)},i=[],n=(t("4de4"),t("96cf"),t("1da1")),r={name:"add-field",watch:{activeTabName:function(){this.key=Math.random()}},data:function(){var e=[{label:"text - 文本框",value:"text"},{label:"textarea - 文本域",value:"textarea"},{label:"select - 下拉框",value:"select"},{label:"selectTree - 下拉树形选项",value:"selectTree"},{label:"cascader - 级联选择器",value:"cascader"},{label:"radio - 单选",value:"radio"},{label:"checkbox - 复选",value:"checkbox"},{label:"number - 数字输入框",value:"number"},{label:"date - 日期",value:"date"},{label:"datetime - 日期时间",value:"datetime"},{label:"hidden - 隐藏",value:"hidden"},{label:"plan - 进度条",value:"plan"},{label:"image - 图片上传",value:"image"},{label:"year_select",value:"year_select"},{label:"month_select",value:"month_select"},{label:"date_select",value:"date_select"},{label:"time_select",value:"time_select"},{label:"datetime_select",value:"datetime_select"},{label:"部门选择",value:"部门选择"},{label:"角色选择",value:"角色选择"}],a=[{label:"text - 文本",value:"text"},{label:"tag - 标签",value:"tag"},{label:"plan - 进度条",value:"plan"},{label:"image - 图片",value:"image"},{label:"input - 输入框",value:"input"},{label:"switch - 开关",value:"switch"},{label:"select - 选择框",value:"select"},{label:"dropdown - 下拉框",value:"dropdown"},{label:"tagdown - 标签下拉框",value:"tagdown"},{label:"cascader - 级联选择器",value:"cascader"}];return{key:0,isShow:!0,dialogVisible:!1,activeTabName:"a",id:null,treeData:[],treeOpstion:{label:"title"},tableFormData:{parentName:"请选择左侧菜单"},tableFormfields:[{label:"所属菜单",prop:"parentName",type:"text",wrap:!0,labelWidth:70,readonly:!0},{label:"表别名",prop:"title",wrap:!0,labelWidth:70,type:"text"},{label:"数据表名",prop:"elem",labelWidth:70,type:"text"},{type:"button",label:"",labelWidth:70,options:[{label:"新增关联表",click:this.addReloveTable,style:"primary"}]}],tabelFields:[{label:"ID",prop:"id",minWidth:50},{label:"表别名",prop:"title",type:"input",change:this.tableChange},{label:"表名称",prop:"elem",type:"input",change:this.tableChange},{label:"操作",type:"manage",options:[{label:"查看",click:this.views,style:"primary"},{label:"删除",click:this.tableDel,style:"danger"}]}],tableData:[],tableMenuData:[],tableMenuField:[{prop:"order",label:"排序",type:"input",change:this.tableEdit,width:110},{prop:"type",label:"类型",type:"tagdown",change:this.tableEdit,options:a,width:150},{prop:"style",label:"主题",type:"tagdown",change:this.tableEdit,options:[{label:"danger",value:"danger"},{label:"warning",value:"warning"},{label:"success",value:"success"},{label:"primary",value:"primary"},{label:"info",value:"info"}],width:150},{prop:"minWidth",label:"最小宽度",type:"input",change:this.tableEdit,width:80},{prop:"prop",label:"字段名",type:"input",esizable:!0,change:this.tableEdit},{prop:"label",label:"别名",type:"input",change:this.tableEdit},{prop:"sort",label:"排序",align:"center",type:"switch",change:this.tableEdit,width:80},{prop:"search",label:"查询",align:"center",type:"switch",change:this.tableEdit,width:80},{prop:"visible",label:"显示",align:"center",type:"switch",change:this.tableEdit,width:80},{type:"manage",label:"操作",fixed:"right",width:80,options:[{label:"删除",click:this.tableOrFormDel}]}],formMenuData:[],formMenuField:[{change:this.formEdit,prop:"prop",label:"prop",type:"input",resizable:!0,width:250},{change:this.formEdit,prop:"label",label:"label",type:"input",fixed:"left",width:200},{change:this.formEdit,prop:"order",label:"order",type:"input"},{change:this.formEdit,prop:"type",label:"type",type:"tagdown",options:e,width:120},{change:this.formEdit,prop:"options",label:"options",type:"input",width:250},{change:this.formEdit,prop:"visible",label:"visible",align:"center",type:"switch",width:100},{change:this.formEdit,prop:"visible_add",label:"visible_add",align:"center",type:"switch",width:100},{change:this.formEdit,prop:"visible_edit",label:"visible_edit",align:"center",type:"switch",width:100},{change:this.formEdit,prop:"size",label:"size",type:"select",options:[{label:"default",value:"default"},{label:"mini",value:"mini"},{label:"small",value:"small"},{label:"large",value:"large"}]},{change:this.formEdit,prop:"required",label:"required",align:"center",type:"switch"},{change:this.formEdit,prop:"readonly",label:"readonly",align:"center",type:"switch"},{change:this.formEdit,prop:"disabled",label:"disabled",align:"center",type:"switch"},{type:"manage",label:"操作",fixed:"right",options:[{label:"删除",click:this.tableOrFormDel}]}],addFieldFormData:{fieldFun:!0,visible:!0,minWidth:100,editable:{type:"text"}},addFieldFormFields:[{wrap:!0,span:15,label:"所属菜单",type:"text",prop:"parentName"},{wrap:!0,span:15,label:"字段名称",type:"text",prop:"prop"},{wrap:!0,span:15,label:"字段标题",type:"text",prop:"label"},{wrap:!0,span:15,label:"表格类型",type:"select",prop:"type",change:this.change,options:a},{wrap:!0,span:15,label:"单列宽度",type:"number",prop:"minWidth",placeholder:"默认100px"},{wrap:!0,span:15,label:"排序",type:"number",prop:"order"},{wrap:!0,span:15,label:"是否启用",type:"radio",prop:"visible",options:[{label:"是",value:!0},{label:"否",value:!1}]}],addFieldFormField_a:[{wrap:!0,span:15,label:"字段名",type:"text",prop:"prop"},{wrap:!0,span:15,label:"名称",type:"text",prop:"label"},{wrap:!0,span:15,label:"排序",type:"number",prop:"sort"},{wrap:!0,span:15,label:"表单类型",type:"select",prop:"type",options:e},{wrap:!0,span:15,type:"button",options:[{label:"确定添加",style:"primary",click:this.addField}]}],tableOptions:{maxHeight:"590px",selection:!1,size:"mini"}}},created:function(){this.getTreeList()},methods:{tableOrFormDel:function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var l,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.$confirm("本操作不可恢复，是否继续！","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(){}));case 2:if(l=t.sent,l){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,a.axios("/adminapi/Column/column_del",{data:{id:e.id}});case 7:i=t.sent,n=i.data,n.code&&(a.tableMenuData=a.tableMenuData.filter((function(a){return a.id!==e.id})),a.formMenuData=a.formMenuData.filter((function(a){return a.id!==e.id})));case 10:case"end":return t.stop()}}),t)})))()},tableEdit:function(e){this.axios("/adminapi/Column/column_edit",{data:e})},formEdit:function(e){this.axios("/adminapi/Column/column_editable_edit",{data:e})},tableDel:function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var l,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.$confirm("本操作不可恢复，是否继续！","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(){}));case 2:if(l=t.sent,l){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,a.axios("/adminapi/Column/table_del",{method:"post",data:{id:e.id}});case 7:i=t.sent,n=i.data,n.code&&(a.tableData=a.tableData.filter((function(a){return a.id!=e.id})));case 10:case"end":return t.stop()}}),t)})))()},tableChange:function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.axios("/adminapi/Column/table_edit",{data:e});case 2:case"end":return t.stop()}}),t)})))()},views:function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:l=JSON.parse(JSON.stringify(a.addFieldFormData)),a.addFieldFormData=Object.assign({},l,{parentName:e.title,table_id:e.id}),a.getTableColumn(),a.activeTabName="a";case 4:case"end":return t.stop()}}),t)})))()},getTableColumn:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var t,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.axios("/adminapi/Column/column_list",{data:e.addFieldFormData});case 2:t=a.sent,l=t.data,l.code&&(e.isShow=!0,e.tableMenuData=l.data.column||[],e.formMenuData=l.data.columneditable||[]);case 5:case"end":return a.stop()}}),a)})))()},treeClickNode:function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.id=e.id,a.tableFormData={parentName:e.title,auth_id:e.id},t.next=4,a.page();case 4:case"end":return t.stop()}}),t)})))()},page:function(){var e=arguments,a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var l,i,n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return l=e.length>0&&void 0!==e[0]?e[0]:1,i=e.length>1&&void 0!==e[1]?e[1]:10,n={auth_id:a.id,page:l,limit:i},t.next=5,a.axios("/adminapi/Column/table_list",{data:n});case 5:r=t.sent,o=r.data,o.code?a.tableData=o.data||[]:a.tableData=[];case 8:case"end":return t.stop()}}),t)})))()},getTreeList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var t,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.axios.post("/adminapi/Column/authtree");case 2:t=a.sent,l=t.data,l.code&&(e.treeData=l.data);case 5:case"end":return a.stop()}}),a)})))()},addReloveTable:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var t,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.axios("/adminapi/Column/table_add",{data:e.tableFormData});case 2:t=a.sent,l=t.data,l.code&&(e.page(),e.dialogVisible=!1);case 5:case"end":return a.stop()}}),a)})))()},change:function(e,a,t){console.log(e,a,t)},addField:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var t,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return"text"!==e.addFieldFormData.type&&(e.addFieldFormData.change="change"),a.next=3,e.axios("/adminapi/Column/column_add",{data:e.addFieldFormData});case 3:t=a.sent,l=t.data,l.code&&(e.getTableColumn(),e.addFieldFormData=Object.assign({},e.addFieldFormData,{prop:"",order:"",minWidth:"",type:"",label:""}));case 6:case"end":return a.stop()}}),a)})))()}}},o=r,d=(t("74da"),t("2877")),s=Object(d["a"])(o,l,i,!1,null,"e61af140",null);a["default"]=s.exports},9658:function(e,a,t){}}]);