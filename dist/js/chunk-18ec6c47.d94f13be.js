(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18ec6c47"],{"46f3":function(e,t,r){"use strict";var n=r("c716"),a=r.n(n);a.a},a2fa:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{height:"100%"}},[r("div",{staticClass:"content-item"},[r("el-card",{staticClass:"box-card"},[r("div",{attrs:{slot:"header"},slot:"header"},[e._v(" 组织构架 "),e.orgList.length?e._e():r("el-button",{staticStyle:{float:"right",padding:"5px"},attrs:{type:"primary"},on:{click:e.openList}},[e._v("添加组织")])],1),r("el-scrollbar",[r("el-tree",{attrs:{data:e.orgList,"expand-on-click-node":!0,"default-expanded-keys":e.treeKey,"highlight-current":"","node-key":"id","check-strictly":""},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,a=t.data;return r("span",{staticClass:"custom-tree-node"},[r("span",[e._v(e._s(n.label))]),r("span",[r("i",{staticClass:"el-icon-plus",staticStyle:{color:"#00BABD",padding:"0 5px"},on:{click:function(t){return t.target!==t.currentTarget?null:(t.stopPropagation(),function(){return e.treeAdd(a)}())}}}),r("i",{staticClass:"el-icon-edit",staticStyle:{color:"#ff6600",padding:"0 5px"},on:{click:function(t){return t.stopPropagation(),t.target!==t.currentTarget?null:function(){return e.treeChange(a)}()}}}),a.pid>=0?r("i",{staticClass:"el-icon-delete",staticStyle:{color:"#ee3333",padding:"0 5px"},on:{click:function(t){return t.stopPropagation(),t.target!==t.currentTarget?null:function(){return e.treeDel(a)}()}}}):e._e()])])}}])})],1)],1),r("el-card",{staticClass:"box-card"},[r("div",{attrs:{slot:"header"},slot:"header"},[e._v("组织构架")])])],1),r("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"400px",modal:!0,top:"15vh"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close}},[r("mixForm",{attrs:{fields:e.rolesFields},model:{value:e.orgForm,callback:function(t){e.orgForm=t},expression:"orgForm"}})],1)],1)},a=[],i=r("5530"),o=(r("96cf"),r("1da1")),s={name:"Adminorganization",data:function(){return{orgList:[],treeKey:[],roleList:[],orgForm:{},title:"",dialogFormVisible:!1,rolesFields:[{label:"上级",type:"selectTree",labelWidth:"40",prop:"pid",props:{label:"label",value:"id"},options:[]},{label:"名称",type:"text",labelWidth:"40",prop:"label"},{label:"排序",type:"number",labelWidth:"40",prop:"sort"},{type:"button",labelWidth:"40",label:"确定",style:"primary",click:this.addOrgList}]}},created:function(){this.getRoleList(),this.getOrgList()},methods:{nodeClick:function(e){this.treeKey[0]=e.id},getRoleList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios("/adminapi/Authgroup/list");case 2:r=t.sent,n=r.data,n.code&&(e.roleList=n.data);case 5:case"end":return t.stop()}}),t)})))()},getOrgList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios("/adminapi/Company/list");case 2:r=t.sent,n=r.data,n.code&&(e.orgList=n.data,n.data.length&&(e.rolesFields[0].options=n.data));case 5:case"end":return t.stop()}}),t)})))()},addOrgList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.url||"/adminapi/Company/department_add",t.next=3,e.axios(r,{data:e.orgForm});case 3:n=t.sent,a=n.data,a.code&&(e.getOrgList(),e.dialogFormVisible=!1,e.url="");case 6:case"end":return t.stop()}}),t)})))()},openList:function(){var e=this;this.$prompt("请输入邮箱","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios("/adminapi/Company/company_add",{data:{label:r.value}});case 2:e.getOrgList();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},close:function(){this.orgForm={}},treeAdd:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.title="添加部门",t.orgForm={com_id:e.com_id,pid:"undefined"==typeof e.pid?0:e.id},t.dialogFormVisible=!0;case 3:case"end":return r.stop()}}),r)})))()},treeChange:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.orgForm=Object(i["a"])({},e),t.dialogFormVisible=!0,t.title="修改部门",t.url="/adminapi/Company/department_edit";case 4:case"end":return r.stop()}}),r)})))()},treeDel:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.axios("/adminapi/Company/department_del",{data:e});case 2:n=r.sent,a=n.data,a.code&&(t.$message.success(a.msg),t.getOrgList(),t.orgForm={});case 5:case"end":return r.stop()}}),r)})))()}}},c=s,l=(r("46f3"),r("2877")),u=Object(l["a"])(c,n,a,!1,null,"67561a64",null);t["default"]=u.exports},c716:function(e,t,r){}}]);