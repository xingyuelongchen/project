(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6655dae0"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"4bd8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"box"},[a("mixSearch",{attrs:{fields:e.searchFields},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("mixSearch",{attrs:{fields:e.selectionField},model:{value:e.selectionData,callback:function(t){e.selectionData=t},expression:"selectionData"}}),a("div",{staticStyle:{height:"calc(100% - 150px)"}},[a("mixTable",{attrs:{fields:e.tableFields},on:{select:e.select},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}})],1),a("mixPage",{model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),a("el-dialog",{attrs:{title:e.drawerName,visible:e.drawer,width:"30%","before-close":e.drawerClose}},[a("mixTable",{attrs:{fields:e.dialogTable},on:{select:function(t){return e.select(t,"user")}},model:{value:e.salesList,callback:function(t){e.salesList=t},expression:"salesList"}}),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("提交")])],1)],1)],1)},r=[],s=(a("d81d"),a("ac1f"),a("841c"),a("5530")),i=(a("96cf"),a("1da1")),l={name:"Salesreceive",data:function(){return{url:null,drawerName:"",drawer:!1,salesList:[],search:{},close:null,searchFields:[{label:"模糊搜索",type:"text",prop:"search",span:3},{label:"选择部门",type:"select",prop:"saler_group_zid",span:3},{type:"button",span:5,options:[{label:"搜索",style:"success",click:this.onSearch},{label:"重置",style:"init",click:this.onReset},{label:"添加",style:"primary",icon:"el-icon-plus",click:this.onAdd}]}],page:{limit:10,page:1,total:0},selectList:[],selectionData:{channel:null,source:null,status:null},selectionField:[{label:"接待渠道",type:"select",prop:"source",span:3,options:[{label:"微信",value:1},{label:"QQ",value:2},{label:"微信、QQ",value:3}]},{label:"渠道",type:"select",prop:"channel",span:3,options:[{label:"信息流",value:1},{label:"搜索引擎",value:2},{label:"信息流、搜索引擎",value:3}]},{label:"接待上限",type:"number",prop:"limit",span:3},{label:"接单状态",type:"select",prop:"status",span:3,options:[{label:"开启",value:1},{label:"暂停",value:"0"}]},{type:"button",span:3,options:[{label:"批量修改",click:this.selectEdit,style:"primary"}]}],tableData:[],tableFields:[{type:"selection"},{sort:!0,label:"ID",prop:"id"},{sort:!0,label:"花名",prop:"nickname"},{sort:!0,label:"部门ID",prop:"saler_group_zid"},{sort:!0,label:"累计接待",prop:"count"},{sort:!0,label:"接待上限",prop:"limit",type:"input",change:this.change},{sort:!0,label:"渠道",prop:"channel",type:"select",change:this.change,minWidth:150,options:[{label:"信息流",value:1},{label:"搜索引擎",value:2},{label:"信息流、搜索引擎",value:3}]},{sort:!0,label:"接待渠道",prop:"source",type:"select",change:this.change,minWidth:150,options:[{label:"微信",value:1},{label:"QQ",value:2},{label:"微信、QQ",value:3}]},{sort:!0,label:"权重",prop:"weight",type:"input",change:this.change,minWidth:100},{label:"是否接单",prop:"status",align:"center",type:"switch",change:this.change,options:[{label:"开启",value:!0},{label:"暂停",value:!1}]},{label:"自行控制",prop:"control",align:"center",change:this.change,type:"tag",options:[{label:"是",value:"是",style:"success"},{label:"否",value:"否",style:"danger"}]},{label:"操作",type:"manage",minWidth:250,options:[{label:"删除",style:"danger",click:this.tableDel},{label:"自行控制",style:"warning",click:this.control},{label:"权重",style:"success",click:this.weight}]}],dialogTable:[{type:"selection"},{sort:!0,label:"ID",prop:"id"},{sort:!0,label:"花名",prop:"nickname"},{sort:!0,label:"部门",prop:"dept_id"}],editForm:{user:[]},editFields:[]}},created:function(){this.usersList(),this.getDepartment(),this.getData(!1)},methods:{usersList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios("/adminapi/Customerrefunder/UserList");case 2:a=t.sent,n=a.data,n.code&&(e.salesList=n.data);case 5:case"end":return t.stop()}}),t)})))()},getDepartment:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios("/adminapi/Customerrefunder/dept");case 2:a=t.sent,n=a.data,n.code&&(e.searchFields=e.searchFields.map((function(e){return"saler_group_zid"==e.prop&&(e.options=n.data),e})));case 5:case"end":return t.stop()}}),t)})))()},getData:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=!(e.length>0&&void 0!==e[0])||e[0],r=n?Object.assign({},t.search,t.page):t.page,a.next=4,t.axios("/adminapi/Customerrefunder/list",{data:r});case 4:s=a.sent,i=s.data,i.code&&(t.tableData=i.data,t.page.total=i.total);case 7:case"end":return a.stop()}}),a)})))()},onAdd:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.usersList();case 2:e.drawerOpen("添加"),e.url="/adminapi/Customerrefunder/add";case 4:case"end":return t.stop()}}),t)})))()},select:function(e,t){console.log(e,t),"user"==t?this.editForm.user=e.map((function(e){return e.id})):this.selectList=e},selectEdit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectList&&e.selectList.length){t.next=3;break}return e.$notify.error({title:"错误",message:"请选择需要修改的数据"}),t.abrupt("return");case 3:return a=Object(s["a"])({id:e.selectList.map((function(e){return e.id}))},e.selectionData),n="/adminapi/Customerrefunder/edit",t.next=7,e.axios(n,{data:a});case 7:r=t.sent,i=r.data,i.code&&e.getData(!1);case 10:case"end":return t.stop()}}),t)})))()},onSearch:function(){this.getData()},onReset:function(){this.getData(!1),this.search={}},weight:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$prompt("请输入权重","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"请输入数字",inputValue:e.weight}).then(function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(n){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.axios("/adminapi/Customerrefunder/control",{data:{id:e.id,weight:n.value}});case 2:t.getData();case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 1:case"end":return a.stop()}}),a)})))()},change:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={id:e.id},r[t.column.property]=e[t.column.property],s="/adminapi/Customerrefunder/edit",n.next=5,a.axios(s,{data:r});case 5:case"end":return n.stop()}}),n)})))()},control:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.axios("/adminapi/Customerrefunder/control",{data:{id:e.id,control:"是"==e.control?0:1}});case 2:t.getData();case 3:case"end":return a.stop()}}),a)})))()},tableDel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.axios("/adminapi/Customerrefunder/del",{data:{id:e.id}});case 2:n=a.sent,r=n.data,r.code&&t.getData();case 5:case"end":return a.stop()}}),a)})))()},manage:function(){console.log("操作")},drawerOpen:function(e){this.drawer=!0,this.drawerName=e},drawerClose:function(){this.drawer=!1,this.editForm={}},sizeChange:function(e){this.page.limit=e,this.getData()},currentChange:function(e){this.page.page=e,this.getData()},onSave:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios(e.url,{data:e.editForm.user});case 2:a=t.sent,n=a.data,n.code&&(e.drawerClose(),e.getData());case 5:case"end":return t.stop()}}),t)})))()}}},o=l,c=(a("f0b2"),a("2877")),u=Object(c["a"])(o,n,r,!1,null,"051ec8aa",null);t["default"]=u.exports},"841c":function(e,t,a){"use strict";var n=a("d784"),r=a("825a"),s=a("1d80"),i=a("129f"),l=a("14c3");n("search",1,(function(e,t,a){return[function(t){var a=s(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,a):new RegExp(t)[e](String(a))},function(e){var n=a(t,e,this);if(n.done)return n.value;var s=r(e),o=String(this),c=s.lastIndex;i(c,0)||(s.lastIndex=0);var u=l(s,o);return i(s.lastIndex,c)||(s.lastIndex=c),null===u?-1:u.index}]}))},d953:function(e,t,a){},f0b2:function(e,t,a){"use strict";var n=a("d953"),r=a.n(n);r.a}}]);