(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bafae8a0"],{1856:function(e,t,a){},e6bf:function(e,t,a){"use strict";var r=a("1856"),n=a.n(r);n.a},fad5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap"},[a("el-card",{staticClass:"left",attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.treeAddTop}},[e._v("添加")])],1),a("div",{staticStyle:{height:"100%"}},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"expand-on-click-node":!0,"default-expanded-keys":e.treeKey,"highlight-current":"","node-key":"id","check-strictly":""},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,n=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(r.label))]),a("span",[a("i",{staticClass:"el-icon-plus",staticStyle:{color:"#00BABD",padding:"0 5px"},on:{click:function(t){return t.target!==t.currentTarget?null:(t.stopPropagation(),function(){return e.treeAdd(n)}())}}}),a("i",{staticClass:"el-icon-edit",staticStyle:{color:"#ff6600",padding:"0 5px"},on:{click:function(t){return t.stopPropagation(),t.target!==t.currentTarget?null:function(){return e.treeChange(n)}()}}}),a("i",{staticClass:"el-icon-delete",staticStyle:{color:"#ee3333",padding:"0 5px"},on:{click:function(t){return t.stopPropagation(),t.target!==t.currentTarget?null:function(){return e.treeDel(n)}()}}})])])}}])})],1)],1)]),a("el-card",{staticClass:"right",attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("权限列表")]),a("div",{staticClass:"content-item"},[a("mixTable",{attrs:{fields:e.tableFields},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}}),a("mixPage",{model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)]),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"400px",modal:!0,top:"15vh"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("mixForm",{attrs:{fields:e.rolesFields},model:{value:e.roles,callback:function(t){e.roles=t},expression:"roles"}})],1)],1)},n=[],i=a("5530"),l=(a("96cf"),a("1da1")),s={name:"Roles",data:function(){return{dialogFormVisible:!1,index:0,treeKey:[],title:"",roles:{},rolesFields:[{label:"上级",type:"selectTree",labelWidth:"40",prop:"pid",options:[],props:{label:"title",value:"id",children:"children"}},{label:"名称",type:"text",labelWidth:"40",prop:"title"},{label:"图标",type:"text",labelWidth:"40",prop:"icon"},{label:"排序",type:"number",labelWidth:"40",prop:"sort"},{label:"路径",type:"text",labelWidth:"40",prop:"name"},{type:"button",labelWidth:"40",label:"确定",style:"primary",click:this.addRoleMenu}],treeData:[],tableData:[],tableFields:[{label:"id",prop:"id",width:60},{label:"pid",prop:"pid",width:60},{label:"status",prop:"status",type:"switch",change:this.tableChange,width:100},{label:"name",prop:"name",type:"input",change:this.tableChange},{label:"title",prop:"title",type:"input",change:this.tableChange}],defaultProps:{children:"children",label:"title"},page:{page:1,limie:10,total:0}}},created:function(){this.getMenuData()},methods:{handleNodeClick:function(e){console.log("点击树节点"),this.treeKey[0]=e.id,this.getData(e.id)},treeAddTop:function(){this.title="添加顶级菜单",this.roles={pid:0},this.dialogFormVisible=!0},treeAdd:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.title="添加子菜单",t.roles={pid:e.id},t.dialogFormVisible=!0;case 3:case"end":return a.stop()}}),a)})))()},addRoleMenu:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.url||"/adminapi/Authrule/add",t.next=3,e.axios(a,{method:"post",data:e.roles});case 3:r=t.sent,n=r.data,n.code&&(e.roles={},e.dialogFormVisible=!1,e.getMenuData());case 6:case"end":return t.stop()}}),t)})))()},treeChange:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.roles=Object(i["a"])({},e),t.dialogFormVisible=!0,t.title="修改权限菜单",t.url="/adminapi/Authrule/edit";case 4:case"end":return a.stop()}}),a)})))()},treeDel:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.axios("/adminapi/Authrule/del",{data:e});case 2:r=a.sent,n=r.data,n.code&&(t.$message.success(n.msg),t.getMenuData(),t.roles={});case 5:case"end":return a.stop()}}),a)})))()},tableChange:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.axios("/adminapi/Authrule/edit",{method:"post",data:e});case 2:r=a.sent,n=r.data,n.code&&t.$message.success(n.msg);case 5:case"end":return a.stop()}}),a)})))()},getMenuData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios("/adminapi/Authrule/list");case 2:a=t.sent,r=a.data,n=r.data,r.code&&(e.treeData=n,e.rolesFields[0].options=n,e.url="",e.getData(n[0].id));case 6:case"end":return t.stop()}}),t)})))()},getData:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.axios("/adminapi/Authrule/listPid",{data:{pid:e}});case 2:r=a.sent,n=r.data,n.code&&(t.tableData=n.data);case 5:case"end":return a.stop()}}),a)})))()}}},o=s,c=(a("e6bf"),a("2877")),d=Object(c["a"])(o,r,n,!1,null,"0f85c076",null);t["default"]=d.exports}}]);